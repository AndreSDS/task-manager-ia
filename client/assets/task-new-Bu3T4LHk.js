import{p as _,z as Ot,a as Y,w as Ct}from"./chunk-B7RQU5TL-Dlr5QrnG.js";import{$ as jt,g as At,a as Rt,s as Pt,u as $,b as p,_ as fe,c as Dt,l as Zt,r as Ne,o as I,d as y,e as A,f as P,h as $t,i as Q,j as C,k as te,m as Z,n as Ke,p as ne,q as Ae,t as z,v as Lt}from"./schemas-CTbPr3oH.js";import{c as W,a as Ut,B as et}from"./index-BNECFOSr.js";import{C as Te,a as Jt,c as zt,f as Vt}from"./card-DXEUg30W.js";import{A as be,b as xe,U as Bt}from"./avatar-CqVuFYKY.js";import"./index-CNbaUzR8.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qt=W("book-open",Ft);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],_e=W("bot",Wt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ht=W("circle-check-big",Yt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Qt=W("clipboard-list",Gt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Kt=W("clock",Xt);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ta=W("code",ea);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],ra=W("flask-conical",aa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],na=W("lightbulb",sa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ia=W("send",oa);function la({className:t,type:e,...a}){return _.jsx("input",{type:e,"data-slot":"input",className:Ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var tt="vercel.ai.error",ca=Symbol.for(tt),at,ua=class rt extends Error{constructor({name:e,message:a,cause:r}){super(a),this[at]=!0,this.name=e,this.cause=r}static isInstance(e){return rt.hasMarker(e,tt)}static hasMarker(e,a){const r=Symbol.for(a);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};at=ca;var G=ua;function st(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var nt="AI_InvalidArgumentError",ot=`vercel.ai.error.${nt}`,da=Symbol.for(ot),it,pa=class extends G{constructor({message:t,cause:e,argument:a}){super({name:nt,message:t,cause:e}),this[it]=!0,this.argument=a}static isInstance(t){return G.hasMarker(t,ot)}};it=da;var lt="AI_JSONParseError",ct=`vercel.ai.error.${lt}`,fa=Symbol.for(ct),ut,Ze=class extends G{constructor({text:t,cause:e}){super({name:lt,message:`JSON parsing failed: Text: ${t}.
Error message: ${st(e)}`,cause:e}),this[ut]=!0,this.text=t}static isInstance(t){return G.hasMarker(t,ct)}};ut=fa;var dt="AI_TypeValidationError",pt=`vercel.ai.error.${dt}`,ma=Symbol.for(pt),ft,ha=class ke extends G{constructor({value:e,cause:a}){super({name:dt,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${st(a)}`,cause:a}),this[ft]=!0,this.value=e}static isInstance(e){return G.hasMarker(e,pt)}static wrap({value:e,cause:a}){return ke.isInstance(a)&&a.value===e?a:new ke({value:e,cause:a})}};ft=ma;var me=ha;class $e extends Error{constructor(e,a){super(e),this.name="ParseError",this.type=a.type,this.field=a.field,this.value=a.value,this.line=a.line}}function Se(t){}function ga(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Se,onError:a=Se,onRetry:r=Se,onComment:s}=t;let o="",c=!0,n,u="",i="";function g(E){const f=c?E.replace(/^\xEF\xBB\xBF/,""):E,[l,m]=ya(`${o}${f}`);for(const h of l)v(h);o=m,c=!1}function v(E){if(E===""){O();return}if(E.startsWith(":")){s&&s(E.slice(E.startsWith(": ")?2:1));return}const f=E.indexOf(":");if(f!==-1){const l=E.slice(0,f),m=E[f+1]===" "?2:1,h=E.slice(f+m);N(l,h,E);return}N(E,"",E)}function N(E,f,l){switch(E){case"event":i=f;break;case"data":u=`${u}${f}
`;break;case"id":n=f.includes("\0")?void 0:f;break;case"retry":/^\d+$/.test(f)?r(parseInt(f,10)):a(new $e(`Invalid \`retry\` value: "${f}"`,{type:"invalid-retry",value:f,line:l}));break;default:a(new $e(`Unknown field "${E.length>20?`${E.slice(0,20)}â€¦`:E}"`,{type:"unknown-field",field:E,value:f,line:l}));break}}function O(){u.length>0&&e({id:n,event:i||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),n=void 0,u="",i=""}function b(E={}){o&&E.consume&&v(o),c=!0,n=void 0,u="",i="",o=""}return{feed:g,reset:b}}function ya(t){const e=[];let a="",r=0;for(;r<t.length;){const s=t.indexOf("\r",r),o=t.indexOf(`
`,r);let c=-1;if(s!==-1&&o!==-1?c=Math.min(s,o):s!==-1?s===t.length-1?c=-1:c=s:o!==-1&&(c=o),c===-1){a=t.slice(r);break}else{const n=t.slice(r,c);e.push(n),r=c+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,a]}class va extends TransformStream{constructor({onError:e,onRetry:a,onComment:r}={}){let s;super({start(o){s=ga({onEvent:c=>{o.enqueue(c)},onError(c){e==="terminate"?o.error(c):typeof e=="function"&&e(c)},onRetry:a,onComment:r})},transform(o){s.feed(o)}})}}class Le{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??At,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,a={path:[],schemaPath:[]}){var v,N,O;var r;const s=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},c=this.seen.get(e);if(c)return c.count++,a.schemaPath.includes(e)&&(c.cycle=a.path),c.schema;const n={schema:{},count:1,cycle:void 0,path:a.path};this.seen.set(e,n);const u=(N=(v=e._zod).toJSONSchema)==null?void 0:N.call(v);if(u)n.schema=u;else{const b={...a,schemaPath:[...a.schemaPath,e],path:a.path},E=e._zod.parent;if(E)n.ref=E,this.process(E,b),this.seen.get(E).isParent=!0;else{const f=n.schema;switch(s.type){case"string":{const l=f;l.type="string";const{minimum:m,maximum:h,format:d,patterns:S,contentEncoding:w}=e._zod.bag;if(typeof m=="number"&&(l.minLength=m),typeof h=="number"&&(l.maxLength=h),d&&(l.format=o[d]??d,l.format===""&&delete l.format),w&&(l.contentEncoding=w),S&&S.size>0){const x=[...S];x.length===1?l.pattern=x[0].source:x.length>1&&(n.schema.allOf=[...x.map(R=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:R.source}))])}break}case"number":{const l=f,{minimum:m,maximum:h,format:d,multipleOf:S,exclusiveMaximum:w,exclusiveMinimum:x}=e._zod.bag;typeof d=="string"&&d.includes("int")?l.type="integer":l.type="number",typeof x=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(l.minimum=x,l.exclusiveMinimum=!0):l.exclusiveMinimum=x),typeof m=="number"&&(l.minimum=m,typeof x=="number"&&this.target!=="draft-4"&&(x>=m?delete l.minimum:delete l.exclusiveMinimum)),typeof w=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(l.maximum=w,l.exclusiveMaximum=!0):l.exclusiveMaximum=w),typeof h=="number"&&(l.maximum=h,typeof w=="number"&&this.target!=="draft-4"&&(w<=h?delete l.maximum:delete l.exclusiveMaximum)),typeof S=="number"&&(l.multipleOf=S);break}case"boolean":{const l=f;l.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(f.type="string",f.nullable=!0,f.enum=[null]):f.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{f.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const l=f,{minimum:m,maximum:h}=e._zod.bag;typeof m=="number"&&(l.minItems=m),typeof h=="number"&&(l.maxItems=h),l.type="array",l.items=this.process(s.element,{...b,path:[...b.path,"items"]});break}case"object":{const l=f;l.type="object",l.properties={};const m=s.shape;for(const S in m)l.properties[S]=this.process(m[S],{...b,path:[...b.path,"properties",S]});const h=new Set(Object.keys(m)),d=new Set([...h].filter(S=>{const w=s.shape[S]._zod;return this.io==="input"?w.optin===void 0:w.optout===void 0}));d.size>0&&(l.required=Array.from(d)),((O=s.catchall)==null?void 0:O._zod.def.type)==="never"?l.additionalProperties=!1:s.catchall?s.catchall&&(l.additionalProperties=this.process(s.catchall,{...b,path:[...b.path,"additionalProperties"]})):this.io==="output"&&(l.additionalProperties=!1);break}case"union":{const l=f,m=s.options.map((h,d)=>this.process(h,{...b,path:[...b.path,"anyOf",d]}));l.anyOf=m;break}case"intersection":{const l=f,m=this.process(s.left,{...b,path:[...b.path,"allOf",0]}),h=this.process(s.right,{...b,path:[...b.path,"allOf",1]}),d=w=>"allOf"in w&&Object.keys(w).length===1,S=[...d(m)?m.allOf:[m],...d(h)?h.allOf:[h]];l.allOf=S;break}case"tuple":{const l=f;l.type="array";const m=this.target==="draft-2020-12"?"prefixItems":"items",h=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",d=s.items.map((R,q)=>this.process(R,{...b,path:[...b.path,m,q]})),S=s.rest?this.process(s.rest,{...b,path:[...b.path,h,...this.target==="openapi-3.0"?[s.items.length]:[]]}):null;this.target==="draft-2020-12"?(l.prefixItems=d,S&&(l.items=S)):this.target==="openapi-3.0"?(l.items={anyOf:d},S&&l.items.anyOf.push(S),l.minItems=d.length,S||(l.maxItems=d.length)):(l.items=d,S&&(l.additionalItems=S));const{minimum:w,maximum:x}=e._zod.bag;typeof w=="number"&&(l.minItems=w),typeof x=="number"&&(l.maxItems=x);break}case"record":{const l=f;l.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(l.propertyNames=this.process(s.keyType,{...b,path:[...b.path,"propertyNames"]})),l.additionalProperties=this.process(s.valueType,{...b,path:[...b.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const l=f,m=Rt(s.entries);m.every(h=>typeof h=="number")&&(l.type="number"),m.every(h=>typeof h=="string")&&(l.type="string"),l.enum=m;break}case"literal":{const l=f,m=[];for(const h of s.values)if(h===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof h=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(h))}else m.push(h);if(m.length!==0)if(m.length===1){const h=m[0];l.type=h===null?"null":typeof h,this.target==="draft-4"||this.target==="openapi-3.0"?l.enum=[h]:l.const=h}else m.every(h=>typeof h=="number")&&(l.type="number"),m.every(h=>typeof h=="string")&&(l.type="string"),m.every(h=>typeof h=="boolean")&&(l.type="string"),m.every(h=>h===null)&&(l.type="null"),l.enum=m;break}case"file":{const l=f,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:h,maximum:d,mime:S}=e._zod.bag;h!==void 0&&(m.minLength=h),d!==void 0&&(m.maxLength=d),S?S.length===1?(m.contentMediaType=S[0],Object.assign(l,m)):l.anyOf=S.map(w=>({...m,contentMediaType:w})):Object.assign(l,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const l=this.process(s.innerType,b);this.target==="openapi-3.0"?(n.ref=s.innerType,f.nullable=!0):f.anyOf=[l,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,b),n.ref=s.innerType;break}case"success":{const l=f;l.type="boolean";break}case"default":{this.process(s.innerType,b),n.ref=s.innerType,f.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,b),n.ref=s.innerType,this.io==="input"&&(f._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,b),n.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}f.default=l;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const l=f,m=e._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");l.type="string",l.pattern=m.source;break}case"pipe":{const l=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(l,b),n.ref=l;break}case"readonly":{this.process(s.innerType,b),n.ref=s.innerType,f.readOnly=!0;break}case"promise":{this.process(s.innerType,b),n.ref=s.innerType;break}case"optional":{this.process(s.innerType,b),n.ref=s.innerType;break}case"lazy":{const l=e._zod.innerType;this.process(l,b),n.ref=l;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const i=this.metadataRegistry.get(e);return i&&Object.assign(n.schema,i),this.io==="input"&&D(e)&&(delete n.schema.examples,delete n.schema.default),this.io==="input"&&n.schema._prefault&&((r=n.schema).default??(r.default=n.schema._prefault)),delete n.schema._prefault,this.seen.get(e).schema}emit(e,a){var g,v,N,O,b,E;const r={cycles:(a==null?void 0:a.cycles)??"ref",reused:(a==null?void 0:a.reused)??"inline",external:(a==null?void 0:a.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=f=>{var S;const l=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const w=(S=r.external.registry.get(f[0]))==null?void 0:S.id,x=r.external.uri??(q=>q);if(w)return{ref:x(w)};const R=f[1].defId??f[1].schema.id??`schema${this.counter++}`;return f[1].defId=R,{defId:R,ref:`${x("__shared")}#/${l}/${R}`}}if(f[1]===s)return{ref:"#"};const h=`#/${l}/`,d=f[1].schema.id??`__schema${this.counter++}`;return{defId:d,ref:h+d}},c=f=>{if(f[1].schema.$ref)return;const l=f[1],{ref:m,defId:h}=o(f);l.def={...l.schema},h&&(l.defId=h);const d=l.schema;for(const S in d)delete d[S];d.$ref=m};if(r.cycles==="throw")for(const f of this.seen.entries()){const l=f[1];if(l.cycle)throw new Error(`Cycle detected: #/${(g=l.cycle)==null?void 0:g.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const f of this.seen.entries()){const l=f[1];if(e===f[0]){c(f);continue}if(r.external){const h=(v=r.external.registry.get(f[0]))==null?void 0:v.id;if(e!==f[0]&&h){c(f);continue}}if((N=this.metadataRegistry.get(f[0]))==null?void 0:N.id){c(f);continue}if(l.cycle){c(f);continue}if(l.count>1&&r.reused==="ref"){c(f);continue}}const n=(f,l)=>{const m=this.seen.get(f),h=m.def??m.schema,d={...h};if(m.ref===null)return;const S=m.ref;if(m.ref=null,S){n(S,l);const w=this.seen.get(S).schema;w.$ref&&(l.target==="draft-7"||l.target==="draft-4"||l.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(w)):(Object.assign(h,w),Object.assign(h,d))}m.isParent||this.override({zodSchema:f,jsonSchema:h,path:m.path??[]})};for(const f of[...this.seen.entries()].reverse())n(f[0],{target:this.target});const u={};if(this.target==="draft-2020-12"?u.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?u.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?u.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),(O=r.external)!=null&&O.uri){const f=(b=r.external.registry.get(e))==null?void 0:b.id;if(!f)throw new Error("Schema is missing an `id` property");u.$id=r.external.uri(f)}Object.assign(u,s.def);const i=((E=r.external)==null?void 0:E.defs)??{};for(const f of this.seen.entries()){const l=f[1];l.def&&l.defId&&(i[l.defId]=l.def)}r.external||Object.keys(i).length>0&&(this.target==="draft-2020-12"?u.$defs=i:u.definitions=i);try{return JSON.parse(JSON.stringify(u))}catch{throw new Error("Error converting schema to JSON.")}}}function ba(t,e){if(t instanceof jt){const r=new Le(e),s={};for(const n of t._idmap.entries()){const[u,i]=n;r.process(i)}const o={},c={registry:t,uri:e==null?void 0:e.uri,defs:s};for(const n of t._idmap.entries()){const[u,i]=n;o[u]=r.emit(i,{...e,external:c})}if(Object.keys(s).length>0){const n=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[n]:s}}return{schemas:o}}const a=new Le(e);return a.process(t),a.emit(t,e)}function D(t,e){const a=e??{seen:new Set};if(a.seen.has(t))return!1;a.seen.add(t);const s=t._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return D(s.element,a);case"object":{for(const o in s.shape)if(D(s.shape[o],a))return!0;return!1}case"union":{for(const o of s.options)if(D(o,a))return!0;return!1}case"intersection":return D(s.left,a)||D(s.right,a);case"tuple":{for(const o of s.items)if(D(o,a))return!0;return!!(s.rest&&D(s.rest,a))}case"record":return D(s.keyType,a)||D(s.valueType,a);case"map":return D(s.keyType,a)||D(s.valueType,a);case"set":return D(s.valueType,a);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return D(s.innerType,a);case"lazy":return D(s.getter(),a);case"default":return D(s.innerType,a);case"prefault":return D(s.innerType,a);case"custom":return!1;case"transform":return!0;case"pipe":return D(s.in,a)||D(s.out,a);case"success":return!1;case"catch":return!1;case"function":return!1}throw new Error(`Unknown schema type: ${s.type}`)}var oe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function a(s){throw new Error}t.assertNever=a,t.arrayToEnum=s=>{const o={};for(const c of s)o[c]=c;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(n=>typeof s[s[n]]!="number"),c={};for(const n of o)c[n]=s[n];return t.objectValues(c)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.push(c);return o},t.find=(s,o)=>{for(const c of s)if(o(c))return c},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(oe||(oe={}));var Ue;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(Ue||(Ue={}));oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class he extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(a(c));else{let n=r,u=0;for(;u<c.path.length;){const i=c.path[u];u===c.path.length-1?(n[i]=n[i]||{_errors:[]},n[i]._errors.push(a(c))):n[i]=n[i]||{_errors:[]},n=n[i],u++}}};return s(this),r}static assert(e){if(!(e instanceof he))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){const a={},r=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];a[o]=a[o]||[],a[o].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}he.create=t=>new he(t);var Je;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Je||(Je={}));var T;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(T||(T={}));function ze(t=globalThis){var e,a,r;return t.window?"runtime/browser":(e=t.navigator)!=null&&e.userAgent?`runtime/${t.navigator.userAgent.toLowerCase()}`:(r=(a=t.process)==null?void 0:a.versions)!=null&&r.node?`runtime/node.js/${t.process.version.substring(0)}`:t.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function xa(t){return Object.fromEntries(Object.entries(t).filter(([e,a])=>a!=null))}function Ve(t,...e){const a=xa(t??{}),r=new Headers(a),s=r.get("user-agent")||"";return r.set("user-agent",[s,...e].filter(Boolean).join(" ")),Object.fromEntries(r)}var ce=({prefix:t,size:e=16,alphabet:a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=()=>{const o=a.length,c=new Array(e);for(let n=0;n<e;n++)c[n]=a[Math.random()*o|0];return c.join("")};if(t==null)return s;if(a.includes(r))throw new pa({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${a}".`});return()=>`${t}${r}${s()}`},_a=ce(),Sa=/"__proto__"\s*:/,Ia=/"constructor"\s*:/;function Ea(t){const e=JSON.parse(t);return e===null||typeof e!="object"||Sa.test(t)===!1&&Ia.test(t)===!1?e:wa(e)}function wa(t){let e=[t];for(;e.length;){const a=e;e=[];for(const r of a){if(Object.prototype.hasOwnProperty.call(r,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in r){const o=r[s];o&&typeof o=="object"&&e.push(o)}}}return t}function Na(t){const{stackTraceLimit:e}=Error;Error.stackTraceLimit=0;try{return Ea(t)}finally{Error.stackTraceLimit=e}}var ge=Symbol.for("vercel.ai.validator");function Ta(t){return{[ge]:!0,validate:t}}function ka(t){return typeof t=="object"&&t!==null&&ge in t&&t[ge]===!0&&"validate"in t}function Ma(t){return ka(t)?t:Oa(t)}function Oa(t){return Ta(async e=>{const a=await t["~standard"].validate(e);return a.issues==null?{success:!0,value:a.value}:{success:!1,error:new me({value:e,cause:a.issues})}})}async function Be({value:t,schema:e}){const a=await Re({value:t,schema:e});if(!a.success)throw me.wrap({value:t,cause:a.error});return a.value}async function Re({value:t,schema:e}){const a=Ma(e);try{if(a.validate==null)return{success:!0,value:t,rawValue:t};const r=await a.validate(t);return r.success?{success:!0,value:r.value,rawValue:t}:{success:!1,error:me.wrap({value:t,cause:r.error}),rawValue:t}}catch(r){return{success:!1,error:me.wrap({value:t,cause:r}),rawValue:t}}}async function ye({text:t,schema:e}){try{const a=Na(t);return e==null?{success:!0,value:a,rawValue:a}:await Re({value:a,schema:e})}catch(a){return{success:!1,error:Ze.isInstance(a)?a:new Ze({text:t,cause:a}),rawValue:void 0}}}function Ca({stream:t,schema:e}){return t.pipeThrough(new TextDecoderStream).pipeThrough(new va).pipeThrough(new TransformStream({async transform({data:a},r){a!=="[DONE]"&&r.enqueue(await ye({text:a,schema:e}))}}))}async function X(t){return typeof t=="function"&&(t=t()),Promise.resolve(t)}var ja=(t,e)=>{let a=0;for(;a<t.length&&a<e.length&&t[a]===e[a];a++);return[(t.length-a).toString(),...e.slice(a)].join("/")},Aa=Symbol("Let zodToJsonSchema decide on which parser to use"),Fe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Ra=t=>typeof t=="string"?{...Fe,name:t}:{...Fe,...t};function U(){return{}}function Pa(t,e){var a,r,s;const o={type:"array"};return(a=t.type)!=null&&a._def&&((s=(r=t.type)==null?void 0:r._def)==null?void 0:s.typeName)!==T.ZodAny&&(o.items=M(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&(o.minItems=t.minLength.value),t.maxLength&&(o.maxItems=t.maxLength.value),t.exactLength&&(o.minItems=t.exactLength.value,o.maxItems=t.exactLength.value),o}function Da(t){const e={type:"integer",format:"int64"};if(!t.checks)return e;for(const a of t.checks)switch(a.kind){case"min":a.inclusive?e.minimum=a.value:e.exclusiveMinimum=a.value;break;case"max":a.inclusive?e.maximum=a.value:e.exclusiveMaximum=a.value;break;case"multipleOf":e.multipleOf=a.value;break}return e}function Za(){return{type:"boolean"}}function mt(t,e){return M(t.type._def,e)}var $a=(t,e)=>M(t.innerType._def,e);function ht(t,e,a){const r=a??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,o)=>ht(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return La(t)}}var La=t=>{const e={type:"integer",format:"unix-time"};for(const a of t.checks)switch(a.kind){case"min":e.minimum=a.value;break;case"max":e.maximum=a.value;break}return e};function Ua(t,e){return{...M(t.innerType._def,e),default:t.defaultValue()}}function Ja(t,e){return e.effectStrategy==="input"?M(t.schema._def,e):U()}function za(t){return{type:"string",enum:Array.from(t.values)}}var Va=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function Ba(t,e){const a=[M(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),M(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),r=[];return a.forEach(s=>{if(Va(s))r.push(...s.allOf);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:c,...n}=s;o=n}r.push(o)}}),r.length?{allOf:r}:void 0}function Fa(t){const e=typeof t.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(t.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:t.value}}var Ie=void 0,V={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ie===void 0&&(Ie=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ie),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function gt(t,e){const a={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value;break;case"max":a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value;break;case"email":switch(e.emailStrategy){case"format:email":B(a,"email",r.message,e);break;case"format:idn-email":B(a,"idn-email",r.message,e);break;case"pattern:zod":L(a,V.email,r.message,e);break}break;case"url":B(a,"uri",r.message,e);break;case"uuid":B(a,"uuid",r.message,e);break;case"regex":L(a,r.regex,r.message,e);break;case"cuid":L(a,V.cuid,r.message,e);break;case"cuid2":L(a,V.cuid2,r.message,e);break;case"startsWith":L(a,RegExp(`^${Ee(r.value,e)}`),r.message,e);break;case"endsWith":L(a,RegExp(`${Ee(r.value,e)}$`),r.message,e);break;case"datetime":B(a,"date-time",r.message,e);break;case"date":B(a,"date",r.message,e);break;case"time":B(a,"time",r.message,e);break;case"duration":B(a,"duration",r.message,e);break;case"length":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value;break;case"includes":{L(a,RegExp(Ee(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&B(a,"ipv4",r.message,e),r.version!=="v4"&&B(a,"ipv6",r.message,e);break}case"base64url":L(a,V.base64url,r.message,e);break;case"jwt":L(a,V.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&L(a,V.ipv4Cidr,r.message,e),r.version!=="v4"&&L(a,V.ipv6Cidr,r.message,e);break}case"emoji":L(a,V.emoji(),r.message,e);break;case"ulid":{L(a,V.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{B(a,"binary",r.message,e);break}case"contentEncoding:base64":{a.contentEncoding="base64";break}case"pattern:zod":{L(a,V.base64,r.message,e);break}}break}case"nanoid":L(a,V.nanoid,r.message,e)}return a}function Ee(t,e){return e.patternStrategy==="escape"?Wa(t):t}var qa=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Wa(t){let e="";for(let a=0;a<t.length;a++)qa.has(t[a])||(e+="\\"),e+=t[a];return e}function B(t,e,a,r){var s;t.format||(s=t.anyOf)!=null&&s.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format}),delete t.format),t.anyOf.push({format:e,...a&&r.errorMessages&&{errorMessage:{format:a}}})):t.format=e}function L(t,e,a,r){var s;t.pattern||(s=t.allOf)!=null&&s.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern}),delete t.pattern),t.allOf.push({pattern:qe(e,r),...a&&r.errorMessages&&{errorMessage:{pattern:a}}})):t.pattern=qe(e,r)}function qe(t,e){var a;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let o="",c=!1,n=!1,u=!1;for(let i=0;i<s.length;i++){if(c){o+=s[i],c=!1;continue}if(r.i){if(n){if(s[i].match(/[a-z]/)){u?(o+=s[i],o+=`${s[i-2]}-${s[i]}`.toUpperCase(),u=!1):s[i+1]==="-"&&((a=s[i+2])!=null&&a.match(/[a-z]/))?(o+=s[i],u=!0):o+=`${s[i]}${s[i].toUpperCase()}`;continue}}else if(s[i].match(/[a-z]/)){o+=`[${s[i]}${s[i].toUpperCase()}]`;continue}}if(r.m){if(s[i]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(s[i]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&s[i]==="."){o+=n?`${s[i]}\r
`:`[${s[i]}\r
]`;continue}o+=s[i],s[i]==="\\"?c=!0:n&&s[i]==="]"?n=!1:!n&&s[i]==="["&&(n=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o}function yt(t,e){var a,r,s,o,c,n;const u={type:"object",additionalProperties:(a=M(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?a:e.allowedAdditionalProperties};if(((r=t.keyType)==null?void 0:r._def.typeName)===T.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:i,...g}=gt(t.keyType._def,e);return{...u,propertyNames:g}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===T.ZodEnum)return{...u,propertyNames:{enum:t.keyType._def.values}};if(((c=t.keyType)==null?void 0:c._def.typeName)===T.ZodBranded&&t.keyType._def.type._def.typeName===T.ZodString&&((n=t.keyType._def.type._def.checks)!=null&&n.length)){const{type:i,...g}=mt(t.keyType._def,e);return{...u,propertyNames:g}}}return u}function Ya(t,e){if(e.mapStrategy==="record")return yt(t,e);const a=M(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||U(),r=M(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||U();return{type:"array",maxItems:125,items:{type:"array",items:[a,r],minItems:2,maxItems:2}}}function Ha(t){const e=t.values,r=Object.keys(t.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),s=Array.from(new Set(r.map(o=>typeof o)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Ga(){return{not:U()}}function Qa(){return{type:"null"}}var Me={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Xa(t,e){const a=t.options instanceof Map?Array.from(t.options.values()):t.options;if(a.every(r=>r._def.typeName in Me&&(!r._def.checks||!r._def.checks.length))){const r=a.reduce((s,o)=>{const c=Me[o._def.typeName];return c&&!s.includes(c)?[...s,c]:s},[]);return{type:r.length>1?r:r[0]}}else if(a.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=a.reduce((s,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...s,c];case"bigint":return[...s,"integer"];case"object":if(o._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===a.length){const s=r.filter((o,c,n)=>n.indexOf(o)===c);return{type:s.length>1?s:s[0],enum:a.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(a.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((r,s)=>[...r,...s._def.values.filter(o=>!r.includes(o))],[])};return Ka(t,e)}var Ka=(t,e)=>{const a=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>M(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return a.length?{anyOf:a}:void 0};function er(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return{type:[Me[t.innerType._def.typeName],"null"]};const a=M(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function tr(t){const e={type:"number"};if(!t.checks)return e;for(const a of t.checks)switch(a.kind){case"int":e.type="integer";break;case"min":a.inclusive?e.minimum=a.value:e.exclusiveMinimum=a.value;break;case"max":a.inclusive?e.maximum=a.value:e.exclusiveMaximum=a.value;break;case"multipleOf":e.multipleOf=a.value;break}return e}function ar(t,e){const a={type:"object",properties:{}},r=[],s=t.shape();for(const c in s){let n=s[c];if(n===void 0||n._def===void 0)continue;const u=sr(n),i=M(n._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});i!==void 0&&(a.properties[c]=i,u||r.push(c))}r.length&&(a.required=r);const o=rr(t,e);return o!==void 0&&(a.additionalProperties=o),a}function rr(t,e){if(t.catchall._def.typeName!=="ZodNever")return M(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function sr(t){try{return t.isOptional()}catch{return!0}}var nr=(t,e)=>{var a;if(e.currentPath.toString()===((a=e.propertyPath)==null?void 0:a.toString()))return M(t.innerType._def,e);const r=M(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:U()},r]}:U()},or=(t,e)=>{if(e.pipeStrategy==="input")return M(t.in._def,e);if(e.pipeStrategy==="output")return M(t.out._def,e);const a=M(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=M(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,r].filter(s=>s!==void 0)}};function ir(t,e){return M(t.type._def,e)}function lr(t,e){const r={type:"array",uniqueItems:!0,items:M(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&(r.minItems=t.minSize.value),t.maxSize&&(r.maxItems=t.maxSize.value),r}function cr(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((a,r)=>M(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[]),additionalItems:M(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((a,r)=>M(a._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[])}}function ur(){return{not:U()}}function dr(){return U()}var pr=(t,e)=>M(t.innerType._def,e),fr=(t,e,a)=>{switch(e){case T.ZodString:return gt(t,a);case T.ZodNumber:return tr(t);case T.ZodObject:return ar(t,a);case T.ZodBigInt:return Da(t);case T.ZodBoolean:return Za();case T.ZodDate:return ht(t,a);case T.ZodUndefined:return ur();case T.ZodNull:return Qa();case T.ZodArray:return Pa(t,a);case T.ZodUnion:case T.ZodDiscriminatedUnion:return Xa(t,a);case T.ZodIntersection:return Ba(t,a);case T.ZodTuple:return cr(t,a);case T.ZodRecord:return yt(t,a);case T.ZodLiteral:return Fa(t);case T.ZodEnum:return za(t);case T.ZodNativeEnum:return Ha(t);case T.ZodNullable:return er(t,a);case T.ZodOptional:return nr(t,a);case T.ZodMap:return Ya(t,a);case T.ZodSet:return lr(t,a);case T.ZodLazy:return()=>t.getter()._def;case T.ZodPromise:return ir(t,a);case T.ZodNaN:case T.ZodNever:return Ga();case T.ZodEffects:return Ja(t,a);case T.ZodAny:return U();case T.ZodUnknown:return dr();case T.ZodDefault:return Ua(t,a);case T.ZodBranded:return mt(t,a);case T.ZodReadonly:return pr(t,a);case T.ZodCatch:return $a(t,a);case T.ZodPipeline:return or(t,a);case T.ZodFunction:case T.ZodVoid:case T.ZodSymbol:return;default:return(r=>{})()}};function M(t,e,a=!1){var r;const s=e.seen.get(t);if(e.override){const u=(r=e.override)==null?void 0:r.call(e,t,e,s,a);if(u!==Aa)return u}if(s&&!a){const u=mr(s,e);if(u!==void 0)return u}const o={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,o);const c=fr(t,t.typeName,e),n=typeof c=="function"?M(c(),e):c;if(n&&hr(t,e,n),e.postProcess){const u=e.postProcess(n,t,e);return o.jsonSchema=n,u}return o.jsonSchema=n,n}var mr=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ja(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((a,r)=>e.currentPath[r]===a)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),U()):e.$refStrategy==="seen"?U():void 0}},hr=(t,e,a)=>(t.description&&(a.description=t.description),a),gr=t=>{const e=Ra(t),a=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}},yr=(t,e)=>{var a;const r=gr(e);let s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((i,[g,v])=>{var N;return{...i,[g]:(N=M(v._def,{...r,currentPath:[...r.basePath,r.definitionPath,g]},!0))!=null?N:U()}},{}):void 0;const o=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,c=(a=M(t._def,o===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1))!=null?a:U(),n=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;n!==void 0&&(c.title=n);const u=o===void 0?s?{...c,[r.definitionPath]:s}:c:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...s,[o]:c}};return u.$schema="http://json-schema.org/draft-07/schema#",u},vr=yr;function br(t,e){var a;const r=(a=void 0)!=null?a:!1;return Pe(vr(t,{$refStrategy:r?"root":"none"}),{validate:async s=>{const o=await t.safeParseAsync(s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function xr(t,e){var a;const r=(a=void 0)!=null?a:!1,s=ba(t,{target:"draft-7",io:"output",reused:r?"ref":"inline"});return Pe(s,{validate:async o=>{const c=await Pt(t,o);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}function _r(t){return"_zod"in t}function Sr(t,e){return _r(t)?xr(t):br(t)}var Oe=Symbol.for("vercel.ai.schema");function Pe(t,{validate:e}={}){return{[Oe]:!0,_type:void 0,[ge]:!0,jsonSchema:t,validate:e}}function Ir(t){return typeof t=="object"&&t!==null&&Oe in t&&t[Oe]===!0&&"jsonSchema"in t&&"validate"in t}function Er(t){return t==null?Pe({properties:{},additionalProperties:!1}):Ir(t)?t:Sr(t)}var wr=Object.defineProperty,Nr=(t,e)=>{for(var a in e)wr(t,a,{get:e[a],enumerable:!0})},vt="AI_NoObjectGeneratedError",bt=`vercel.ai.error.${vt}`,Tr=Symbol.for(bt),xt,We=class extends G{constructor({message:t="No object generated.",cause:e,text:a,response:r,usage:s,finishReason:o}){super({name:vt,message:t,cause:e}),this[xt]=!0,this.text=a,this.response=r,this.usage=s,this.finishReason=o}static isInstance(t){return G.hasMarker(t,bt)}};xt=Tr;var Ye="5.0.48",_t=$([p(),fe(Uint8Array),fe(ArrayBuffer),Dt(t=>{var e,a;return(a=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?a:!1},{message:"Must be a Buffer"})]),ie=Zt(()=>$([Lt(),p(),ne(),A(),Ne(p(),ie),Q(ie)])),k=Ne(p(),Ne(p(),ie)),St=I({type:y("text"),text:p(),providerOptions:k.optional()}),kr=I({type:y("image"),image:$([_t,fe(URL)]),mediaType:p().optional(),providerOptions:k.optional()}),It=I({type:y("file"),data:$([_t,fe(URL)]),filename:p().optional(),mediaType:p(),providerOptions:k.optional()}),Mr=I({type:y("reasoning"),text:p(),providerOptions:k.optional()}),Or=I({type:y("tool-call"),toolCallId:p(),toolName:p(),input:P(),providerOptions:k.optional(),providerExecuted:A().optional()}),Cr=$t("type",[I({type:y("text"),value:p()}),I({type:y("json"),value:ie}),I({type:y("error-text"),value:p()}),I({type:y("error-json"),value:ie}),I({type:y("content"),value:Q($([I({type:y("text"),text:p()}),I({type:y("media"),data:p(),mediaType:p()})]))})]),Et=I({type:y("tool-result"),toolCallId:p(),toolName:p(),output:Cr,providerOptions:k.optional()}),jr=I({role:y("system"),content:p(),providerOptions:k.optional()}),Ar=I({role:y("user"),content:$([p(),Q($([St,kr,It]))]),providerOptions:k.optional()}),Rr=I({role:y("assistant"),content:$([p(),Q($([St,It,Mr,Or,Et]))]),providerOptions:k.optional()}),Pr=I({role:y("tool"),content:Q(Et),providerOptions:k.optional()});$([jr,Ar,Rr,Pr]);ce({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(t,e){e.enqueue(`data: ${JSON.stringify(t)}

`)},flush(t){t.enqueue(`data: [DONE]

`)}})}});var Dr=$([C({type:y("text-start"),id:p(),providerMetadata:k.optional()}),C({type:y("text-delta"),id:p(),delta:p(),providerMetadata:k.optional()}),C({type:y("text-end"),id:p(),providerMetadata:k.optional()}),C({type:y("error"),errorText:p()}),C({type:y("tool-input-start"),toolCallId:p(),toolName:p(),providerExecuted:A().optional(),dynamic:A().optional()}),C({type:y("tool-input-delta"),toolCallId:p(),inputTextDelta:p()}),C({type:y("tool-input-available"),toolCallId:p(),toolName:p(),input:P(),providerExecuted:A().optional(),providerMetadata:k.optional(),dynamic:A().optional()}),C({type:y("tool-input-error"),toolCallId:p(),toolName:p(),input:P(),providerExecuted:A().optional(),providerMetadata:k.optional(),dynamic:A().optional(),errorText:p()}),C({type:y("tool-output-available"),toolCallId:p(),output:P(),providerExecuted:A().optional(),dynamic:A().optional(),preliminary:A().optional()}),C({type:y("tool-output-error"),toolCallId:p(),errorText:p(),providerExecuted:A().optional(),dynamic:A().optional()}),C({type:y("reasoning"),text:p(),providerMetadata:k.optional()}),C({type:y("reasoning-start"),id:p(),providerMetadata:k.optional()}),C({type:y("reasoning-delta"),id:p(),delta:p(),providerMetadata:k.optional()}),C({type:y("reasoning-end"),id:p(),providerMetadata:k.optional()}),C({type:y("reasoning-part-finish")}),C({type:y("source-url"),sourceId:p(),url:p(),title:p().optional(),providerMetadata:k.optional()}),C({type:y("source-document"),sourceId:p(),mediaType:p(),title:p(),filename:p().optional(),providerMetadata:k.optional()}),C({type:y("file"),url:p(),mediaType:p(),providerMetadata:k.optional()}),C({type:p().startsWith("data-"),id:p().optional(),data:P(),transient:A().optional()}),C({type:y("start-step")}),C({type:y("finish-step")}),C({type:y("start"),messageId:p().optional(),messageMetadata:P().optional()}),C({type:y("finish"),messageMetadata:P().optional()}),C({type:y("abort")}),C({type:y("message-metadata"),messageMetadata:P()})]);function Zr(t){return t.type.startsWith("data-")}function wt(t,e){if(t===void 0&&e===void 0)return;if(t===void 0)return e;if(e===void 0)return t;const a={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];if(s===void 0)continue;const o=r in t?t[r]:void 0,c=s!==null&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),n=o!=null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp);c&&n?a[r]=wt(o,s):a[r]=s}return a}function $r(t){const e=["ROOT"];let a=-1,r=null;function s(u,i,g){switch(u){case'"':{a=i,e.pop(),e.push(g),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{a=i,r=i,e.pop(),e.push(g),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(g),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=i,e.pop(),e.push(g),e.push("INSIDE_NUMBER");break}case"{":{a=i,e.pop(),e.push(g),e.push("INSIDE_OBJECT_START");break}case"[":{a=i,e.pop(),e.push(g),e.push("INSIDE_ARRAY_START");break}}}function o(u,i){switch(u){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{a=i,e.pop();break}}}function c(u,i){switch(u){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=i,e.pop();break}}}for(let u=0;u<t.length;u++){const i=t[u];switch(e[e.length-1]){case"ROOT":s(i,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(i){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{a=u,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(i){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(i){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(i){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(i,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(i,u);break}case"INSIDE_STRING":{switch(i){case'"':{e.pop(),a=u;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:a=u}break}case"INSIDE_ARRAY_START":{switch(i){case"]":{a=u,e.pop();break}default:{a=u,s(i,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(i){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=u,e.pop();break}default:{a=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(i,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),a=u;break}case"INSIDE_NUMBER":{switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=u;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(i,u),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(i,u);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(i,u);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(i,u);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const v=t.substring(r,u+1);!"false".startsWith(v)&&!"true".startsWith(v)&&!"null".startsWith(v)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(i,u):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(i,u)):a=u;break}}}let n=t.slice(0,a+1);for(let u=e.length-1;u>=0;u--)switch(e[u]){case"INSIDE_STRING":{n+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{n+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{n+="]";break}case"INSIDE_LITERAL":{const g=t.substring(r,t.length);"true".startsWith(g)?n+="true".slice(g.length):"false".startsWith(g)?n+="false".slice(g.length):"null".startsWith(g)&&(n+="null".slice(g.length))}}return n}async function Nt(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=await ye({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=await ye({text:$r(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function ue(t){return t.type.startsWith("tool-")}function Lr(t){return t.type==="dynamic-tool"}function He(t){return ue(t)||Lr(t)}function Ge(t){return t.type.split("-").slice(1).join("-")}function Ur({lastMessage:t,messageId:e}){return{message:(t==null?void 0:t.role)==="assistant"?t:{id:e,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Jr({stream:t,messageMetadataSchema:e,dataPartSchemas:a,runUpdateMessageJob:r,onError:s,onToolCall:o,onData:c}){return t.pipeThrough(new TransformStream({async transform(n,u){await r(async({state:i,write:g})=>{var v,N,O,b;function E(d){const w=i.message.parts.filter(ue).find(x=>x.toolCallId===d);if(w==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return w}function f(d){const w=i.message.parts.filter(x=>x.type==="dynamic-tool").find(x=>x.toolCallId===d);if(w==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return w}function l(d){var S;const w=i.message.parts.find(q=>ue(q)&&q.toolCallId===d.toolCallId),x=d,R=w;w!=null?(w.state=d.state,R.input=x.input,R.output=x.output,R.errorText=x.errorText,R.rawInput=x.rawInput,R.preliminary=x.preliminary,R.providerExecuted=(S=x.providerExecuted)!=null?S:w.providerExecuted,x.providerMetadata!=null&&w.state==="input-available"&&(w.callProviderMetadata=x.providerMetadata)):i.message.parts.push({type:`tool-${d.toolName}`,toolCallId:d.toolCallId,state:d.state,input:x.input,output:x.output,rawInput:x.rawInput,errorText:x.errorText,providerExecuted:x.providerExecuted,preliminary:x.preliminary,...x.providerMetadata!=null?{callProviderMetadata:x.providerMetadata}:{}})}function m(d){var S;const w=i.message.parts.find(q=>q.type==="dynamic-tool"&&q.toolCallId===d.toolCallId),x=d,R=w;w!=null?(w.state=d.state,R.toolName=d.toolName,R.input=x.input,R.output=x.output,R.errorText=x.errorText,R.rawInput=(S=x.rawInput)!=null?S:R.rawInput,R.preliminary=x.preliminary,x.providerMetadata!=null&&w.state==="input-available"&&(w.callProviderMetadata=x.providerMetadata)):i.message.parts.push({type:"dynamic-tool",toolName:d.toolName,toolCallId:d.toolCallId,state:d.state,input:x.input,output:x.output,errorText:x.errorText,preliminary:x.preliminary,...x.providerMetadata!=null?{callProviderMetadata:x.providerMetadata}:{}})}async function h(d){if(d!=null){const S=i.message.metadata!=null?wt(i.message.metadata,d):d;e!=null&&await Be({value:S,schema:e}),i.message.metadata=S}}switch(n.type){case"text-start":{const d={type:"text",text:"",providerMetadata:n.providerMetadata,state:"streaming"};i.activeTextParts[n.id]=d,i.message.parts.push(d),g();break}case"text-delta":{const d=i.activeTextParts[n.id];d.text+=n.delta,d.providerMetadata=(v=n.providerMetadata)!=null?v:d.providerMetadata,g();break}case"text-end":{const d=i.activeTextParts[n.id];d.state="done",d.providerMetadata=(N=n.providerMetadata)!=null?N:d.providerMetadata,delete i.activeTextParts[n.id],g();break}case"reasoning-start":{const d={type:"reasoning",text:"",providerMetadata:n.providerMetadata,state:"streaming"};i.activeReasoningParts[n.id]=d,i.message.parts.push(d),g();break}case"reasoning-delta":{const d=i.activeReasoningParts[n.id];d.text+=n.delta,d.providerMetadata=(O=n.providerMetadata)!=null?O:d.providerMetadata,g();break}case"reasoning-end":{const d=i.activeReasoningParts[n.id];d.providerMetadata=(b=n.providerMetadata)!=null?b:d.providerMetadata,d.state="done",delete i.activeReasoningParts[n.id],g();break}case"file":{i.message.parts.push({type:"file",mediaType:n.mediaType,url:n.url}),g();break}case"source-url":{i.message.parts.push({type:"source-url",sourceId:n.sourceId,url:n.url,title:n.title,providerMetadata:n.providerMetadata}),g();break}case"source-document":{i.message.parts.push({type:"source-document",sourceId:n.sourceId,mediaType:n.mediaType,title:n.title,filename:n.filename,providerMetadata:n.providerMetadata}),g();break}case"tool-input-start":{const d=i.message.parts.filter(ue);i.partialToolCalls[n.toolCallId]={text:"",toolName:n.toolName,index:d.length,dynamic:n.dynamic},n.dynamic?m({toolCallId:n.toolCallId,toolName:n.toolName,state:"input-streaming",input:void 0}):l({toolCallId:n.toolCallId,toolName:n.toolName,state:"input-streaming",input:void 0,providerExecuted:n.providerExecuted}),g();break}case"tool-input-delta":{const d=i.partialToolCalls[n.toolCallId];d.text+=n.inputTextDelta;const{value:S}=await Nt(d.text);d.dynamic?m({toolCallId:n.toolCallId,toolName:d.toolName,state:"input-streaming",input:S}):l({toolCallId:n.toolCallId,toolName:d.toolName,state:"input-streaming",input:S}),g();break}case"tool-input-available":{n.dynamic?m({toolCallId:n.toolCallId,toolName:n.toolName,state:"input-available",input:n.input,providerMetadata:n.providerMetadata}):l({toolCallId:n.toolCallId,toolName:n.toolName,state:"input-available",input:n.input,providerExecuted:n.providerExecuted,providerMetadata:n.providerMetadata}),g(),o&&!n.providerExecuted&&await o({toolCall:n});break}case"tool-input-error":{n.dynamic?m({toolCallId:n.toolCallId,toolName:n.toolName,state:"output-error",input:n.input,errorText:n.errorText,providerMetadata:n.providerMetadata}):l({toolCallId:n.toolCallId,toolName:n.toolName,state:"output-error",input:void 0,rawInput:n.input,errorText:n.errorText,providerExecuted:n.providerExecuted,providerMetadata:n.providerMetadata}),g();break}case"tool-output-available":{if(n.dynamic){const d=f(n.toolCallId);m({toolCallId:n.toolCallId,toolName:d.toolName,state:"output-available",input:d.input,output:n.output,preliminary:n.preliminary})}else{const d=E(n.toolCallId);l({toolCallId:n.toolCallId,toolName:Ge(d),state:"output-available",input:d.input,output:n.output,providerExecuted:n.providerExecuted,preliminary:n.preliminary})}g();break}case"tool-output-error":{if(n.dynamic){const d=f(n.toolCallId);m({toolCallId:n.toolCallId,toolName:d.toolName,state:"output-error",input:d.input,errorText:n.errorText})}else{const d=E(n.toolCallId);l({toolCallId:n.toolCallId,toolName:Ge(d),state:"output-error",input:d.input,rawInput:d.rawInput,errorText:n.errorText})}g();break}case"start-step":{i.message.parts.push({type:"step-start"});break}case"finish-step":{i.activeTextParts={},i.activeReasoningParts={};break}case"start":{n.messageId!=null&&(i.message.id=n.messageId),await h(n.messageMetadata),(n.messageId!=null||n.messageMetadata!=null)&&g();break}case"finish":{await h(n.messageMetadata),n.messageMetadata!=null&&g();break}case"message-metadata":{await h(n.messageMetadata),n.messageMetadata!=null&&g();break}case"error":{s==null||s(new Error(n.errorText));break}default:if(Zr(n)){(a==null?void 0:a[n.type])!=null&&await Be({value:n.data,schema:a[n.type]});const d=n;if(d.transient){c==null||c(d);break}const S=d.id!=null?i.message.parts.find(w=>d.type===w.type&&d.id===w.id):void 0;S!=null?S.data=d.data:i.message.parts.push(d),c==null||c(d),g()}}u.enqueue(n)})}}))}async function zr({stream:t,onError:e}){const a=t.getReader();try{for(;;){const{done:r}=await a.read();if(r)break}}catch(r){e==null||e(r)}finally{a.releaseLock()}}ce({prefix:"aitxt",size:24});ce({prefix:"aiobj",size:24});var Vr=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(t){return new Promise((e,a)=>{this.queue.push(async()=>{try{await t(),e()}catch(r){a(r)}}),this.processQueue()})}};ce({prefix:"aiobj",size:24});var Br={};Nr(Br,{object:()=>qr,text:()=>Fr});var Fr=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:t}){return{partial:t}},async parseOutput({text:t}){return t}}),qr=({schema:t})=>{const e=Er(t);return{type:"object",responseFormat:{type:"json",schema:e.jsonSchema},async parsePartial({text:a}){const r=await Nt(a);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const s=r.state;throw new Error(`Unsupported parse state: ${s}`)}}},async parseOutput({text:a},r){const s=await ye({text:a});if(!s.success)throw new We({message:"No object generated: could not parse the response.",cause:s.error,text:a,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=await Re({value:s.value,schema:e});if(!o.success)throw new We({message:"No object generated: response did not match schema.",cause:o.error,text:a,response:r.response,usage:r.usage,finishReason:r.finishReason});return o.value}}},Wr=te({name:p(),version:p()}),De=te({_meta:Z(I({}).loose())}),le=De,Yr=I({method:p(),params:Z(De)}),Hr=te({experimental:Z(I({}).loose()),logging:Z(I({}).loose()),prompts:Z(te({listChanged:Z(A())})),resources:Z(te({subscribe:Z(A()),listChanged:Z(A())})),tools:Z(te({listChanged:Z(A())}))});le.extend({protocolVersion:p(),capabilities:Hr,serverInfo:Wr,instructions:Z(p())});var Gr=le.extend({nextCursor:Z(p())}),Qr=I({name:p(),description:Z(p()),inputSchema:I({type:y("object"),properties:Z(I({}).loose())}).loose()}).loose();Gr.extend({tools:Q(Qr)});var Xr=I({type:y("text"),text:p()}).loose(),Kr=I({type:y("image"),data:Ke(),mimeType:p()}).loose(),Tt=I({uri:p(),mimeType:Z(p())}).loose(),es=Tt.extend({text:p()}),ts=Tt.extend({blob:Ke()}),as=I({type:y("resource"),resource:$([es,ts])}).loose();le.extend({content:Q($([Xr,Kr,as])),isError:A().default(!1).optional()}).or(le.extend({toolResult:P()}));var ve="2.0",rs=I({jsonrpc:y(ve),id:$([p(),ne().int()])}).merge(Yr).strict(),ss=I({jsonrpc:y(ve),id:$([p(),ne().int()]),result:le}).strict(),ns=I({jsonrpc:y(ve),id:$([p(),ne().int()]),error:I({code:ne().int(),message:p(),data:Z(P())})}).strict(),os=I({jsonrpc:y(ve)}).merge(I({method:p(),params:Z(De)})).strict();$([rs,os,ss,ns]);async function is(t){if(t==null)return[];if(!globalThis.FileList||!(t instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(t).map(async e=>{const{name:a,type:r}=e,s=await new Promise((o,c)=>{const n=new FileReader;n.onload=u=>{var i;o((i=u.target)==null?void 0:i.result)},n.onerror=u=>c(u),n.readAsDataURL(e)});return{type:"file",mediaType:r,filename:a,url:s}}))}var ls=class{constructor({api:t="/api/chat",credentials:e,headers:a,body:r,fetch:s,prepareSendMessagesRequest:o,prepareReconnectToStreamRequest:c}){this.api=t,this.credentials=e,this.headers=a,this.body=r,this.fetch=s,this.prepareSendMessagesRequest=o,this.prepareReconnectToStreamRequest=c}async sendMessages({abortSignal:t,...e}){var a,r,s,o,c;const n=await X(this.body),u=await X(this.headers),i=await X(this.credentials),g=await((a=this.prepareSendMessagesRequest)==null?void 0:a.call(this,{api:this.api,id:e.chatId,messages:e.messages,body:{...n,...e.body},headers:{...u,...e.headers},credentials:i,requestMetadata:e.metadata,trigger:e.trigger,messageId:e.messageId})),v=(r=g==null?void 0:g.api)!=null?r:this.api,N=(g==null?void 0:g.headers)!==void 0?g.headers:{...u,...e.headers},O=(g==null?void 0:g.body)!==void 0?g.body:{...n,...e.body,id:e.chatId,messages:e.messages,trigger:e.trigger,messageId:e.messageId},b=(s=g==null?void 0:g.credentials)!=null?s:i,f=await((o=this.fetch)!=null?o:globalThis.fetch)(v,{method:"POST",headers:Ve({"Content-Type":"application/json",...N},`ai-sdk/${Ye}`,ze()),body:JSON.stringify(O),credentials:b,signal:t});if(!f.ok)throw new Error((c=await f.text())!=null?c:"Failed to fetch the chat response.");if(!f.body)throw new Error("The response body is empty.");return this.processResponseStream(f.body)}async reconnectToStream(t){var e,a,r,s,o;const c=await X(this.body),n=await X(this.headers),u=await X(this.credentials),i=await((e=this.prepareReconnectToStreamRequest)==null?void 0:e.call(this,{api:this.api,id:t.chatId,body:{...c,...t.body},headers:{...n,...t.headers},credentials:u,requestMetadata:t.metadata})),g=(a=i==null?void 0:i.api)!=null?a:`${this.api}/${t.chatId}/stream`,v=(i==null?void 0:i.headers)!==void 0?i.headers:{...n,...t.headers},N=(r=i==null?void 0:i.credentials)!=null?r:u,b=await((s=this.fetch)!=null?s:globalThis.fetch)(g,{method:"GET",headers:Ve(v,`ai-sdk/${Ye}`,ze()),credentials:N});if(b.status===204)return null;if(!b.ok)throw new Error((o=await b.text())!=null?o:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");return this.processResponseStream(b.body)}},kt=class extends ls{constructor(t={}){super(t)}processResponseStream(t){return Ca({stream:t,schema:Dr}).pipeThrough(new TransformStream({async transform(e,a){if(!e.success)throw e.error;a.enqueue(e.value)}}))}},cs=class{constructor({generateId:t=_a,id:e=t(),transport:a=new kt,messageMetadataSchema:r,dataPartSchemas:s,state:o,onError:c,onToolCall:n,onFinish:u,onData:i,sendAutomaticallyWhen:g}){this.activeResponse=void 0,this.jobExecutor=new Vr,this.sendMessage=async(v,N)=>{var O,b,E,f;if(v==null){await this.makeRequest({trigger:"submit-message",messageId:(O=this.lastMessage)==null?void 0:O.id,...N});return}let l;if("text"in v||"files"in v?l={parts:[...Array.isArray(v.files)?v.files:await is(v.files),..."text"in v&&v.text!=null?[{type:"text",text:v.text}]:[]]}:l=v,v.messageId!=null){const m=this.state.messages.findIndex(h=>h.id===v.messageId);if(m===-1)throw new Error(`message with id ${v.messageId} not found`);if(this.state.messages[m].role!=="user")throw new Error(`message with id ${v.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,m+1),this.state.replaceMessage(m,{...l,id:v.messageId,role:(b=l.role)!=null?b:"user",metadata:v.metadata})}else this.state.pushMessage({...l,id:(E=l.id)!=null?E:this.generateId(),role:(f=l.role)!=null?f:"user",metadata:v.metadata});await this.makeRequest({trigger:"submit-message",messageId:v.messageId,...N})},this.regenerate=async({messageId:v,...N}={})=>{const O=v==null?this.state.messages.length-1:this.state.messages.findIndex(b=>b.id===v);if(O===-1)throw new Error(`message ${v} not found`);this.state.messages=this.state.messages.slice(0,this.messages[O].role==="assistant"?O:O+1),await this.makeRequest({trigger:"regenerate-message",messageId:v,...N})},this.resumeStream=async(v={})=>{await this.makeRequest({trigger:"resume-stream",...v})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolResult=async({tool:v,toolCallId:N,output:O})=>this.jobExecutor.run(async()=>{var b,E;const f=this.state.messages,l=f[f.length-1];this.state.replaceMessage(f.length-1,{...l,parts:l.parts.map(m=>He(m)&&m.toolCallId===N?{...m,state:"output-available",output:O}:m)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(m=>He(m)&&m.toolCallId===N?{...m,state:"output-available",output:O,errorText:void 0}:m)),this.status!=="streaming"&&this.status!=="submitted"&&((b=this.sendAutomaticallyWhen)!=null&&b.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(E=this.lastMessage)==null?void 0:E.id})}),this.stop=async()=>{var v;this.status!=="streaming"&&this.status!=="submitted"||(v=this.activeResponse)!=null&&v.abortController&&this.activeResponse.abortController.abort()},this.id=e,this.transport=a,this.generateId=t,this.messageMetadataSchema=r,this.dataPartSchemas=s,this.state=o,this.onError=c,this.onToolCall=n,this.onFinish=u,this.onData=i,this.sendAutomaticallyWhen=g}get status(){return this.state.status}setStatus({status:t,error:e}){this.status!==t&&(this.state.status=t,this.state.error=e)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(t){this.state.messages=t}async makeRequest({trigger:t,metadata:e,headers:a,body:r,messageId:s}){var o,c,n;this.setStatus({status:"submitted",error:void 0});const u=this.lastMessage;let i=!1,g=!1,v=!1;try{const N={state:Ur({lastMessage:this.state.snapshot(u),messageId:this.generateId()}),abortController:new AbortController};N.abortController.signal.addEventListener("abort",()=>{i=!0}),this.activeResponse=N;let O;if(t==="resume-stream"){const E=await this.transport.reconnectToStream({chatId:this.id,metadata:e,headers:a,body:r});if(E==null){this.setStatus({status:"ready"});return}O=E}else O=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:N.abortController.signal,metadata:e,headers:a,body:r,trigger:t,messageId:s});const b=E=>this.jobExecutor.run(()=>E({state:N.state,write:()=>{var f;this.setStatus({status:"streaming"}),N.state.message.id===((f=this.lastMessage)==null?void 0:f.id)?this.state.replaceMessage(this.state.messages.length-1,N.state.message):this.state.pushMessage(N.state.message)}}));await zr({stream:Jr({stream:O,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:b,onError:E=>{throw E}}),onError:E=>{throw E}}),this.setStatus({status:"ready"})}catch(N){if(i||N.name==="AbortError")return i=!0,this.setStatus({status:"ready"}),null;v=!0,N instanceof TypeError&&(N.message.toLowerCase().includes("fetch")||N.message.toLowerCase().includes("network"))&&(g=!0),this.onError&&N instanceof Error&&this.onError(N),this.setStatus({status:"error",error:N})}finally{try{(o=this.onFinish)==null||o.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:i,isDisconnect:g,isError:v})}catch(N){console.error(N)}this.activeResponse=void 0}(c=this.sendAutomaticallyWhen)!=null&&c.call(this,{messages:this.state.messages})&&await this.makeRequest({trigger:"submit-message",messageId:(n=this.lastMessage)==null?void 0:n.id,metadata:e,headers:a,body:r})}},us=I({type:y("text"),text:p(),state:Ae(["streaming","done"]).optional(),providerMetadata:k.optional()}),ds=I({type:y("reasoning"),text:p(),state:Ae(["streaming","done"]).optional(),providerMetadata:k.optional()}),ps=I({type:y("source-url"),sourceId:p(),url:p(),title:p().optional(),providerMetadata:k.optional()}),fs=I({type:y("source-document"),sourceId:p(),mediaType:p(),title:p(),filename:p().optional(),providerMetadata:k.optional()}),ms=I({type:y("file"),mediaType:p(),filename:p().optional(),url:p(),providerMetadata:k.optional()}),hs=I({type:y("step-start")}),gs=I({type:p().startsWith("data-"),id:p().optional(),data:P()}),ys=[I({type:y("dynamic-tool"),toolName:p(),toolCallId:p(),state:y("input-streaming"),input:P().optional(),output:z().optional(),errorText:z().optional()}),I({type:y("dynamic-tool"),toolName:p(),toolCallId:p(),state:y("input-available"),input:P(),output:z().optional(),errorText:z().optional(),callProviderMetadata:k.optional()}),I({type:y("dynamic-tool"),toolName:p(),toolCallId:p(),state:y("output-available"),input:P(),output:P(),errorText:z().optional(),callProviderMetadata:k.optional(),preliminary:A().optional()}),I({type:y("dynamic-tool"),toolName:p(),toolCallId:p(),state:y("output-error"),input:P(),output:z().optional(),errorText:p(),callProviderMetadata:k.optional()})],vs=[I({type:p().startsWith("tool-"),toolCallId:p(),state:y("input-streaming"),providerExecuted:A().optional(),input:P().optional(),output:z().optional(),errorText:z().optional()}),I({type:p().startsWith("tool-"),toolCallId:p(),state:y("input-available"),providerExecuted:A().optional(),input:P(),output:z().optional(),errorText:z().optional(),callProviderMetadata:k.optional()}),I({type:p().startsWith("tool-"),toolCallId:p(),state:y("output-available"),providerExecuted:A().optional(),input:P(),output:P(),errorText:z().optional(),callProviderMetadata:k.optional(),preliminary:A().optional()}),I({type:p().startsWith("tool-"),toolCallId:p(),state:y("output-error"),providerExecuted:A().optional(),input:P(),output:z().optional(),errorText:p(),callProviderMetadata:k.optional()})];I({id:p(),role:Ae(["system","user","assistant"]),metadata:P().optional(),parts:Q($([us,ds,ps,fs,ms,hs,gs,...ys,...vs]))});var we,Qe;function bs(){if(Qe)return we;Qe=1;function t(e,a){if(typeof e!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let r,s=0;return function(...c){clearTimeout(r);const n=Date.now(),u=n-s,i=a-u;i<=0?(s=n,e.apply(this,c)):r=setTimeout(()=>{s=Date.now(),e.apply(this,c)},i)}}return we=t,we}var xs=bs();const _s=Ot(xs);var Mt=(t,e,a)=>{if(!e.has(t))throw TypeError("Cannot "+a)},j=(t,e,a)=>(Mt(t,e,"read from private field"),a?a.call(t):e.get(t)),F=(t,e,a)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,a)},H=(t,e,a,r)=>(Mt(t,e,"write to private field"),e.set(t,a),a);function Ss(t,e){return e!=null?_s(t,e):t}var J,de,pe,ae,re,se,K,Ce,je,Is=class{constructor(t=[]){F(this,J,void 0),F(this,de,"ready"),F(this,pe,void 0),F(this,ae,new Set),F(this,re,new Set),F(this,se,new Set),this.pushMessage=e=>{H(this,J,j(this,J).concat(e)),j(this,K).call(this)},this.popMessage=()=>{H(this,J,j(this,J).slice(0,-1)),j(this,K).call(this)},this.replaceMessage=(e,a)=>{H(this,J,[...j(this,J).slice(0,e),this.snapshot(a),...j(this,J).slice(e+1)]),j(this,K).call(this)},this.snapshot=e=>structuredClone(e),this["~registerMessagesCallback"]=(e,a)=>{const r=a?Ss(e,a):e;return j(this,ae).add(r),()=>{j(this,ae).delete(r)}},this["~registerStatusCallback"]=e=>(j(this,re).add(e),()=>{j(this,re).delete(e)}),this["~registerErrorCallback"]=e=>(j(this,se).add(e),()=>{j(this,se).delete(e)}),F(this,K,()=>{j(this,ae).forEach(e=>e())}),F(this,Ce,()=>{j(this,re).forEach(e=>e())}),F(this,je,()=>{j(this,se).forEach(e=>e())}),H(this,J,t)}get status(){return j(this,de)}set status(t){H(this,de,t),j(this,Ce).call(this)}get error(){return j(this,pe)}set error(t){H(this,pe,t),j(this,je).call(this)}get messages(){return j(this,J)}set messages(t){H(this,J,[...t]),j(this,K).call(this)}};J=new WeakMap;de=new WeakMap;pe=new WeakMap;ae=new WeakMap;re=new WeakMap;se=new WeakMap;K=new WeakMap;Ce=new WeakMap;je=new WeakMap;var ee,Xe=class extends cs{constructor({messages:t,...e}){const a=new Is(t);super({...e,state:a}),F(this,ee,void 0),this["~registerMessagesCallback"]=(r,s)=>j(this,ee)["~registerMessagesCallback"](r,s),this["~registerStatusCallback"]=r=>j(this,ee)["~registerStatusCallback"](r),this["~registerErrorCallback"]=r=>j(this,ee)["~registerErrorCallback"](r),H(this,ee,a)}};ee=new WeakMap;function Es({experimental_throttle:t,resume:e=!1,...a}={}){const r=Y.useRef("chat"in a?a.chat:new Xe(a));("chat"in a&&a.chat!==r.current||"id"in a&&r.current.id!==a.id)&&(r.current="chat"in a?a.chat:new Xe(a));const o="id"in a?a.id:null,c=Y.useCallback(v=>r.current["~registerMessagesCallback"](v,t),[t,o]),n=Y.useSyncExternalStore(c,()=>r.current.messages,()=>r.current.messages),u=Y.useSyncExternalStore(r.current["~registerStatusCallback"],()=>r.current.status,()=>r.current.status),i=Y.useSyncExternalStore(r.current["~registerErrorCallback"],()=>r.current.error,()=>r.current.error),g=Y.useCallback(v=>{typeof v=="function"&&(v=v(r.current.messages)),r.current.messages=v},[r]);return Y.useEffect(()=>{e&&r.current.resumeStream()},[e,r]),{id:r.current.id,messages:n,setMessages:g,sendMessage:r.current.sendMessage,regenerate:r.current.regenerate,clearError:r.current.clearError,stop:r.current.stop,error:i,resumeStream:r.current.resumeStream,status:u,addToolResult:r.current.addToolResult}}function ws(){const[t,e]=Y.useState(""),{messages:a,sendMessage:r,status:s}=Es({transport:new kt({api:"/api/chat"})}),o=c=>{c.preventDefault(),t.trim()&&s!=="in_progress"&&(r({text:t}),e(""))};return _.jsxs("div",{className:"flex flex-col h-full w-full mx-auto px-4",children:[_.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4",children:[a.length===0&&_.jsxs("div",{className:"text-center py-12",children:[_.jsx(_e,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),_.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Welcome! How can I help you today?"}),_.jsx("p",{className:"text-muted-foreground",children:"Start a conversation by typing a message below."})]}),a.map(c=>_.jsxs("div",{className:`flex gap-3 ${c.role==="user"?"justify-end":"justify-start"}`,children:[c.role==="assistant"&&_.jsx(be,{className:"w-8 h-8 bg-muted border",children:_.jsx(xe,{children:_.jsx(_e,{className:"w-4 h-4 text-muted-foreground"})})}),_.jsx(Te,{className:`max-w-[80%] p-4 ${c.role==="user"?"bg-primary text-primary-foreground":"bg-card border shadow-sm"}`,children:_.jsx("div",{className:"text-sm leading-relaxed",children:c.parts.map((n,u)=>n.type==="text"?_.jsx("span",{children:n.text},u):null)})}),c.role==="user"&&_.jsx(be,{className:"w-8 h-8 bg-secondary border",children:_.jsx(xe,{children:_.jsx(Bt,{className:"w-4 h-4 text-secondary-foreground"})})})]},c.id)),s==="in_progress"&&_.jsxs("div",{className:"flex gap-3 justify-start",children:[_.jsx(be,{className:"w-8 h-8 bg-muted border",children:_.jsx(xe,{children:_.jsx(_e,{className:"w-4 h-4 text-muted-foreground"})})}),_.jsx(Te,{className:"bg-card border shadow-sm p-4",children:_.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[_.jsxs("div",{className:"flex gap-1",children:[_.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.3s]"}),_.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce [animation-delay:-0.15s]"}),_.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"})]}),_.jsx("span",{className:"text-sm",children:"Thinking..."})]})})]})]}),_.jsxs("form",{onSubmit:o,className:"flex gap-2 w-full",children:[_.jsx("div",{className:"flex-1 relative",children:_.jsx(la,{value:t,onChange:c=>e(c.target.value),placeholder:"Type your message...",disabled:s==="in_progress",className:"bg-background border focus:border-ring text-balance"})}),_.jsxs(et,{type:"submit",disabled:!t.trim()||s==="in_progress",className:"px-4",children:[_.jsx(ia,{className:"w-4 h-4"}),_.jsx("span",{className:"sr-only",children:"Send message"})]})]})]})}function Ns({title:t,content:e,icon:a}){return _.jsxs(Te,{children:[_.jsxs(Jt,{className:"flex flex-row items-center space-x-2",children:[_.jsx(a,{className:"h-5 w-5"}),_.jsx(zt,{children:t})]}),_.jsx(Vt,{children:e})]})}const Ts={title:"Secure Login Form with Authentication",description:"Implement a modern login form with field validation, session-based authentication, and real-time error feedback.",estimated_time:"2 days",steps:["Create a form component using React","Add field validation using a suitable library","Connect backend for user authentication","Persist sessions using SQLite","Test full login and logout flow"],suggested_tests:["it('should render login form correctly')","it('should validate input fields')","it('should authenticate valid credentials')","it('should prevent access with invalid credentials')"],acceptance_criteria:["Login form displays properly with required fields","Invalid input is correctly flagged","Valid users can log in and maintain a session","Users are redirected upon login and logout"],implementation_suggestion:"Use React Hook Form for input validation, Prisma ORM for managing user data, and configure protected routes using React Router 7."};function ks(){const t=Ts,e=[{title:"Title",content:t.title,icon:qt},{title:"Description",content:t.description,icon:Qt},{title:"Estimated Time",content:t.estimated_time,icon:Kt},{title:"Steps",content:_.jsx("ul",{className:"list-disc pl-5",children:t.steps.map((a,r)=>_.jsx("li",{children:a},r))}),icon:na},{title:"Acceptance Criteria",content:_.jsx("ul",{className:"list-disc pl-5",children:t.acceptance_criteria.map((a,r)=>_.jsx("li",{children:a},r))}),icon:Ht},{title:"Suggested Tests",content:_.jsx("ul",{className:"list-disc pl-5",children:t.suggested_tests.map((a,r)=>_.jsx("li",{children:a},r))}),icon:ra},{title:"Implementation Suggestion",content:t.implementation_suggestion,icon:ta}];return _.jsxs("section",{children:[_.jsxs("div",{className:"grid gap-4 overflow-y-auto max-h-[calc(100vh-10rem)]",children:[" ",e.map((a,r)=>_.jsx(Ns,{title:a.title,content:a.content,icon:a.icon},r))]}),_.jsx("div",{className:"flex justify-end pt-4",children:_.jsx(et,{children:"Salvar Task"})})]})}function Ms(){return _.jsxs("div",{className:"p-6 grid grid-cols-2 gap-6",children:[_.jsx(ws,{}),_.jsx(ks,{})]})}const Ds=Ct(function(){return _.jsx(Ms,{})});export{Ds as default};
